# Build

Команда `build` осуществляет сборку приложения. 

## Общие

### -b, --base <path>

Задает базовый путь. По умолчанию это локация файла конфигурации (`basis.config`) или текущая папка, если конфигурационный файл не найден или не используется (указан флаг `--no-config`).

Базовый путь так же используется для разрешения абсолютных путей в приложении. Другими словами, он ассоцируется с корнем сайта. Приложение не может ссылаться на файлы, которые располагаются не в рамках базового пути.

> Предположим, что базовый путь `/foo/bar/baz`. Если в приложении встретится, например, `basis.require('/path/to/file.ext')`, то такой путь будет преобразован в `/foo/bar/baz/path/to/file.ext`. Попытки "всплыть" выше игнорируются, например, для `basis.require('/../../path/to/file.ext')` будет по прежнему получен путь `/foo/bar/baz/path/to/file.ext`.

### -f, --file <filename>

Указывает путь к индексному файлу. По умолчанию это `index.html` в базовой папке.

### -o, --output <path>

Указывает папку, где должен быть расположен результат. По умолчанию это `build` в базовой папке.

### -t, --target <target>

Данная опция определяет какой в каком виде необходимо получить результат. Возможны следующие варианты:

- `fs` (по умолчанию) – результат в виде множества файлов, которые необхомы для работы приложения;
- `zip` – результат в виде единственного файла: `zip`-архив, который содержит все файлы;
- `output-graph` – генерирует выходной граф файлов в формате `.dot`, который сохраняется в файл `output-graph.dot`.

### -p, --pack

Флаг сообщает сборщику, что необходимо получать оптимальную сборку, то есть сжимать резутат. Он является сокращением для `--js-build-mode --js-cut-dev --js-pack --css-pack`. Следующие записи эквивалентны:

> basis build -p
> basis build --pack
> basis build --js-build-mode --js-cut-dev --js-pack --css-pack

### --no-single-file

Сокращение для пары флагов `--js-no-single-file --css-no-single-file`. Следующие две записи эквивалентны:

> basis bulid --no-single-file
> basis build --js-no-single-file --css-no-single-file

                                     
### --no-color

Сборщик пытается использовать цвета при выводе информации. Этот флаг запрещает использование цветного вывода.

> basis build --no-color

Обычно нет необходимости явно запрещать цветной вывод, т.к. сборщик проверяет, поддерживается ли такая возможность или нет. Если цветной вывод не поддерживается (например, при выводе в файл), то цвета не используются автоматически.

### --verbose

По умолчанию выводится только основная информаци о процессе сборки. Если необходимо получить детальную информацию о процессе, то используется флаг `--verbose`. Подробная информация позволяет 

### --warnings

По умолчанию, в информации о сборке выводится лишь количество предупреждающих сообщений (warning). Этот флаг указывает сборщику вывести полную информацию о предупреждениях.

```
> basis build
Build with basisjs-tools@1.3.17 (65fa05dda9)
Index file: ./index.html
Output: ./build

....

Warnings: 1
Build done in 1.033s

> basis build --warnings
Build with basisjs-tools@1.3.17 (65fa05dda9)
Index file: ./index.html
Output: ./build

....

Warnings: 1
  template/foo.css
    * File `template/foo.css` not found (/abs/path/to/template/foo.css)
Build done in 1.066s
```

## CSS

### --css-pack

Флаг указывает, что `CSS` должен быть сжат. Для этого используется библиотека [csso](https://github.com/css/csso) (она так же используется для получения `AST`, который анализируется и трансформируется).

Стили сжимаются как в отдельных файлах, так и в атрибутах `style` (в `html` файлах и шаблонах).

### -i, --css-inline-image <max-size>

### --css-optimize-names

### --css-cut-unused

### --css-no-single-file

## JavaScript

### --js-build-mode

### --js-cut-dev

### --js-no-single-file

### --js-pack

### --js-pack-cmd <string>

По умолчанию `google-closure-compiler --charset UTF-8`.

## Misc
  
### -l, --l10n-pack

### --tmpl-pregenerate
